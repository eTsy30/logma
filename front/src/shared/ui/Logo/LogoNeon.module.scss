// AnimatedBulb.module.scss

.bulb {
  cursor: pointer;
  transition: all 0.3s ease;

  // Цоколь (всегда тёмный)
  .baseBottom,
  .baseLeft,
  .baseRight {
    fill: rgb(66.6%, 53.3%, 0%);
    transition: all 0.3s ease;
  }

  // Ниточка
  .filament {
    fill: rgb(100%, 90.2%, 50.2%);
    transition: all 0.05s ease;
  }

  // ВЫКЛЮЧЕНА
  &.off {
    .glow {
      fill: rgb(30%, 25%, 10%);
      filter: none;
    }

    .inner {
      fill: rgb(40%, 35%, 15%);
    }

    .bodyMain {
      fill: rgb(40%, 35%, 10%);
    }

    .bodyLeft {
      fill: rgb(35%, 30%, 8%);
    }

    .bodyRight {
      fill: rgb(45%, 40%, 12%);
    }

    .filament {
      fill: rgb(50%, 45%, 20%);
      opacity: 0.3;
    }
  }

  // ВКЛЮЧЕНА
  &.on {
    .glow {
      fill: rgb(100%, 86.7%, 33.3%);
      filter: url(#bulbGlow);
      animation: glowPulse 3s ease-in-out infinite;
    }

    .inner {
      fill: rgb(100%, 96.5%, 83.6%);
      animation: innerPulse 2s ease-in-out infinite;
    }

    .bodyMain {
      fill: rgb(66.6%, 53.3%, 0%);
    }

    .bodyLeft {
      fill: rgb(63.9%, 51%, 0%);
    }

    .bodyRight {
      fill: rgb(71.3%, 57.2%, 0%);
    }

    .filament {
      fill: rgb(100%, 90.2%, 50.2%);
      opacity: 1;
      animation: filamentGlow 1.5s ease-in-out infinite;
    }
  }

  // МЕРЦАНИЕ
  &.flickering {
    .glow,
    .inner,
    .filament {
      animation: flicker 0.06s ease-in-out;
    }
  }

  // Hover
  &:hover {
    transform: scale(1.02);
  }
}

// Анимации
@keyframes glowPulse {
  0%,
  100% {
    filter: url(#bulbGlow) brightness(1);
    fill: rgb(100%, 86.7%, 33.3%);
  }
  50% {
    filter: url(#bulbGlow) brightness(1.1);
    fill: rgb(100%, 88%, 40%);
  }
}

@keyframes innerPulse {
  0%,
  100% {
    fill: rgb(100%, 96.5%, 83.6%);
  }
  50% {
    fill: rgb(100%, 97%, 88%);
  }
}

@keyframes filamentGlow {
  0%,
  100% {
    opacity: 0.9;
  }
  50% {
    opacity: 1;
  }
}

@keyframes flicker {
  0%,
  100% {
    opacity: 1;
    filter: url(#bulbGlow);
  }
  50% {
    opacity: 0.1;
    filter: none;
  }
}
