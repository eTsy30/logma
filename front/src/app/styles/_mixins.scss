@use 'breakpoints' as *;
@use 'sass:map';
@use 'sass:meta';

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ hover —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ hover –µ—Å—Ç—å –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
@mixin hover {
  @media (hover: hover) {
    &:hover {
      @content;
    }
  }

  @media (hover: none) {
    &:active {
      @content;
    }
  }
}

// –£–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ—Å–ª–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –µ–≥–æ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫
@mixin line-clamp($rows) {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: $rows;
}

// –£–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ—Å–ª–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –µ–≥–æ –≤ 1 —Å—Ç—Ä–æ–∫—É (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–µ)
@mixin text-overflow() {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// –î–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–µ—Å—å –±–ª–æ–∫ (–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ position: relative –Ω–∞ parent –±–ª–æ–∫–µ)
@mixin spread-link() {
  &::before {
    content: '';

    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}

// –ú–∏–∫—Å–∏–Ω –¥–ª—è –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å–æ–≤
@mixin screen-size($breakpoint) {
  @if map.has-key($breakpoints, $breakpoint) {
    @media #{meta.inspect(map.get($breakpoints, $breakpoint))} {
      @content;
    }
  } @else {
    @warn "No value could be retrieved from `#{$breakpoint}`. Available breakpoints are: #{map.keys($breakpoints)}.";
  }
}

// –º–∏–∫—Å–∏–Ω –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä—É–µ—Ç —Å–∫—Ä–æ–ª–ª–±–∞—Ä
@mixin scrollbar(
  $width: 6px,
  $border-radius: 6px,
  $background: var(--canvas-tertiary),
  $background-hover: var(--ink-quaternary)
) {
  &::-webkit-scrollbar {
    width: $width;
    border-radius: $border-radius;
  }

  &::-webkit-scrollbar-track {
    border-radius: $border-radius;
  }

  &::-webkit-scrollbar-thumb {
    border-radius: $border-radius;
    background: $background;
  }

  &::-webkit-scrollbar-thumb:hover {
    background: $background-hover;
  }
}

@mixin layer($layer-name) {
  @supports at-rule(@layer) {
    /* stylelint-disable-next-line */
    @layer #{$layer-name} {
      @content;
    }
  }

  @supports not at-rule(@layer) {
    @content;
  }
}

@mixin reset-browser-icons {
  // IE/Edge: –∫—Ä–µ—Å—Ç–∏–∫ "–æ—á–∏—Å—Ç–∏—Ç—å"
  &::-ms-clear {
    display: none;
  }

  // IE/Edge: –∏–∫–æ–Ω–∫–∞ "–ø–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å"
  &::-ms-reveal {
    display: none;
  }

  // Chrome/Safari: –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –∏ —Å–ø–∏–Ω–Ω–µ—Ä—ã
  &::-webkit-clear-button,
  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button,
  &::-webkit-search-cancel-button {
    display: none;
    appearance: none;
  }
}

@mixin fullscreen-container {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
}
// =====================
// ‚ú® GLOW EFFECTS - –û–ë–ù–û–í–õ–Å–ù–ù–´–ï
// =====================

// –ú—è–≥–∫–æ–µ –≤–Ω–µ—à–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫
@mixin soft-glow($color: var(--glow-primary), $blur: 40px, $spread: -10px) {
  box-shadow:
    0 4px 20px rgba(0, 0, 0, 0.3),
    /* –ë–∞–∑–æ–≤–∞—è —Ç–µ–Ω—å */ 0 0 $blur $spread $color,
    /* –°–∏–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ */ inset 0 1px 0 rgba(255, 255, 255, 0.05); /* –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ */
}

// –°—Ç–µ–∫–ª—è–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º "–≤–æ–∑–¥—É—Ö–∞"
@mixin glass-panel($bg: var(--surface-glass), $border: var(--border-glass)) {
  background: $bg;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid $border;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.08),
    0 8px 32px rgba(0, 0, 0, 0.2),
    0 0 60px rgba(96, 165, 250, 0.08); /* –ú—è–≥–∫–æ–µ —Å–∏–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ */
}

// –ê–∫—Ü–µ–Ω—Ç–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –ø—Ä–∏ hover/focus
@mixin accent-glow($color: var(--accent), $intensity: 0.4) {
  box-shadow:
    0 0 0 1px rgba($color, 0.3),
    0 0 30px rgba($color, $intensity),
    0 0 60px rgba($color, 0.2);
}

// –†–∞–¥–∏–∞–ª—å–Ω–æ–µ —Ñ–æ–Ω–æ–≤–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ (–¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)
@mixin ambient-glow($color: var(--accent), $size: 500px, $opacity: 0.12) {
  position: relative;

  &::before {
    content: '';
    position: absolute;
    width: $size;
    height: $size;
    inset: 0;
    margin: auto;
    pointer-events: none;
    background: radial-gradient(
      circle at center,
      rgba($color, $opacity) 0%,
      transparent 60%
    );
    filter: blur(60px);
    z-index: -1;
  }
}

// =====================
// üé¥ –°–¢–ò–õ–ò –î–õ–Ø –ö–ê–†–¢–û–ß–ï–ö –§–ò–õ–¨–ú–û–í
// =====================

.movie-card {
  @include glass-panel();
  border-radius: 16px;
  transition: all 0.3s ease;

  &:hover {
    @include soft-glow(var(--glow-primary), 50px, -5px);
    transform: translateY(-2px);
    border-color: rgba(255, 255, 255, 0.15);
  }
}

// =====================
// üîç –ü–û–ò–°–ö–û–í–ê–Ø –°–¢–†–û–ö–ê
// =====================

.search-input {
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 24px;
  padding: 12px 20px;
  color: var(--ink-primary);
  box-shadow:
    inset 0 2px 8px rgba(0, 0, 0, 0.2),
    0 0 20px rgba(96, 165, 250, 0.1);

  &:focus {
    box-shadow:
      inset 0 2px 8px rgba(0, 0, 0, 0.2),
      0 0 30px rgba(96, 165, 250, 0.25);
    border-color: rgba(96, 165, 250, 0.4);
  }
}

// =====================
// üì¶ –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–†
// =====================

.main-container {
  @include glass-panel();
  border-radius: 24px;
  @include ambient-glow(#60a5fa, 600px, 0.15);
}
