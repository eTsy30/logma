@use 'breakpoints' as *;
@use 'sass:map';
@use 'sass:meta';

// Отображение hover только тогда, когда hover есть на устройстве
@mixin hover {
  @media (hover: hover) {
    &:hover {
      @content;
    }
  }

  @media (hover: none) {
    &:active {
      @content;
    }
  }
}

// Убирает контент после превышения его в указанное количество строк
@mixin line-clamp($rows) {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: $rows;
}

// Убирает контент после превышения его в 1 строку (поддержка больше)
@mixin text-overflow() {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// Для распространения ссылки на весь блок (Используйте position: relative на parent блоке)
@mixin spread-link() {
  &::before {
    content: '';

    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}

// Миксин для медиа-запросов
@mixin screen-size($breakpoint) {
  @if map.has-key($breakpoints, $breakpoint) {
    @media #{meta.inspect(map.get($breakpoints, $breakpoint))} {
      @content;
    }
  } @else {
    @warn "No value could be retrieved from `#{$breakpoint}`. Available breakpoints are: #{map.keys($breakpoints)}.";
  }
}

// миксин кастомизирует скроллбар
@mixin scrollbar(
  $width: 6px,
  $border-radius: 6px,
  $background: var(--canvas-tertiary),
  $background-hover: var(--ink-quaternary)
) {
  &::-webkit-scrollbar {
    width: $width;
    border-radius: $border-radius;
  }

  &::-webkit-scrollbar-track {
    border-radius: $border-radius;
  }

  &::-webkit-scrollbar-thumb {
    border-radius: $border-radius;
    background: $background;
  }

  &::-webkit-scrollbar-thumb:hover {
    background: $background-hover;
  }
}

@mixin layer($layer-name) {
  @supports at-rule(@layer) {
    /* stylelint-disable-next-line */
    @layer #{$layer-name} {
      @content;
    }
  }

  @supports not at-rule(@layer) {
    @content;
  }
}

@mixin reset-browser-icons {
  // IE/Edge: крестик "очистить"
  &::-ms-clear {
    display: none;
  }

  // IE/Edge: иконка "показать пароль"
  &::-ms-reveal {
    display: none;
  }

  // Chrome/Safari: встроенные кнопки и спиннеры
  &::-webkit-clear-button,
  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button,
  &::-webkit-search-cancel-button {
    display: none;
    appearance: none;
  }
}

@mixin fullscreen-container {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
}
// =====================
// ✨ GLOW EFFECTS
// =====================

// Мягкое внешнее свечение (карточки / окна)
@mixin soft-glow(
  $color: var(--glow-primary),
  $blur: 60px,
  $spread: -20px
) {
  box-shadow:
    0 20px 60px -10px rgba(0, 0, 0, 0.6),
    0 0 $blur $spread $color;
}

// Стеклянная панель
@mixin glass-panel(
  $bg: var(--surface-glass),
  $border: var(--border-glass)
) {
  background: $bg;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid $border;

  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.05),
    0 10px 40px rgba(0, 0, 0, 0.5);
}

// Акцентное свечение (hover / focus / active)
@mixin accent-glow(
  $color: var(--accent),
  $intensity: 0.5
) {
  box-shadow:
    0 0 0 1px rgba($color, 0.3),
    0 0 20px rgba($color, $intensity);
}

// Радиальное фоновое свечение
@mixin ambient-glow(
  $color: var(--accent),
  $size: 600px,
  $opacity: 0.15
) {
  position: relative;

  &::before {
    content: '';
    position: absolute;
    width: $size;
    height: $size;
    inset: 0;
    margin: auto;
    pointer-events: none;

    background: radial-gradient(
      circle at center,
      rgba($color, $opacity) 0%,
      transparent 70%
    );

    filter: blur(80px);
    z-index: -1;
  }
}
